<?php/** * SocialEngineSolutions * * @category   Application_Sesnews * @package    Sesnews * @copyright  Copyright 2019-2020 SocialEngineSolutions * @license    http://www.socialenginesolutions.com/license/ * @version    $Id: index.tpl  2019-02-27 00:00:00 SocialEngineSolutions $ * @author     SocialEngineSolutions */  ?><div class="sesnews_browse_search <?php echo $this->view_type=='horizontal' ? 'sesnews_browse_search_horizontal' : 'sesnews_browse_search_vertical'; ?>">  <?php echo $this->form->render($this) ?></div><?php $request = Zend_Controller_Front::getInstance()->getRequest();?><?php $controllerName = $request->getControllerName();?><?php $actionName = $request->getActionName(); ?><?php $class = '.sesnews_rss_listing';?><?php if($actionName == 'browse'):?>  <?php $pageName = 'sesnews_rss_browse';?>  <?php $widgetName = 'sesnews.browse-rss';?><?php endif;?><?php $identity = Engine_Api::_()->sesnews()->getIdentityWidget($widgetName,'widget',$pageName); ?><script type="application/javascript">    en4.core.runonce.add(function() {      sesJqueryObject('#filter_form').submit(function(e){        e.preventDefault();        if(sesJqueryObject('<?php echo $class;?>').length > 0){          sesJqueryObject('#tabbed-widget_<?php echo $identity; ?>').html('');          sesJqueryObject('#loading_image_<?php echo $identity; ?>').show();          sesJqueryObject('#loadingimgsesnews-wrapper').show();          is_search_<?php echo $identity; ?> = 1;          if(typeof paggingNumber<?php echo $identity; ?> == 'function'){            isSearch = true;            e.preventDefault();            searchParams<?php echo $identity; ?> = sesJqueryObject(this).serialize();            paggingNumber<?php echo $identity; ?>(1);          }else if(typeof viewMore_<?php echo $identity; ?> == 'function'){            isSearch = true;            e.preventDefault();            searchParams<?php echo $identity; ?> = sesJqueryObject(this).serialize();            page<?php echo $identity; ?> = 1;            viewMore_<?php echo $identity; ?>();          }        }        return true;      });    });    function showSubCategory(cat_id,selected) {    var url = en4.core.baseUrl + 'sesnews/index/subcategory/category_id/' + cat_id + '/type/'+ 'search';    new Request.HTML({      url: url,      data: {        'selected':selected      },      onSuccess: function(responseTree, responseElements, responseHTML, responseJavaScript) {        if ($('subcat_id') && responseHTML) {          if ($('subcat_id-wrapper')) {            $('subcat_id-wrapper').style.display = "inline-block";          }          $('subcat_id').innerHTML = responseHTML;        }         else {          if ($('subcat_id-wrapper')) {            $('subcat_id-wrapper').style.display = "none";            $('subcat_id').innerHTML = '';          }          if ($('subsubcat_id-wrapper')) {            $('subsubcat_id-wrapper').style.display = "none";            $('subsubcat_id').innerHTML = '';          }        }      }    }).send();   }    function showSubSubCategory(cat_id,selected) {    if(cat_id == 0){      if ($('subsubcat_id-wrapper')) {        $('subsubcat_id-wrapper').style.display = "none";        $('subsubcat_id').innerHTML = '';      }	      return false;    }    var url = en4.core.baseUrl + 'sesnews/index/subsubcategory/subcategory_id/' + cat_id + '/type/'+ 'search';;    (new Request.HTML({      url: url,      data: {        'selected':selected      },      onSuccess: function(responseTree, responseElements, responseHTML, responseJavaScript) {        if ($('subsubcat_id') && responseHTML) {          if ($('subsubcat_id-wrapper')) {            $('subsubcat_id-wrapper').style.display = "inline-block";          }          $('subsubcat_id').innerHTML = responseHTML;        }         else {          if ($('subsubcat_id-wrapper')) {            $('subsubcat_id-wrapper').style.display = "none";            $('subsubcat_id').innerHTML = '';          }        }      }    })).send();    }  en4.core.runonce.add(function() {    if($('category_id')){      var catAssign = 1;      <?php if(isset($_GET['category_id']) && $_GET['category_id'] != 0){ ?>        <?php if(isset($_GET['subcat_id'])){$catId = $_GET['subcat_id'];}else $catId = ''; ?>        showSubCategory('<?php echo $_GET['category_id']; ?>','<?php echo $catId; ?>');        <?php if(isset($_GET['subsubcat_id'])){ ?>        <?php if(isset($_GET['subsubcat_id'])){$subsubcat_id = $_GET['subsubcat_id'];}else $subsubcat_id = ''; ?>        showSubSubCategory("<?php echo $_GET['subcat_id']; ?>","<?php echo $_GET['subsubcat_id']; ?>");        <?php }else{?>        $('subsubcat_id-wrapper').style.display = "none";        <?php } ?>            <?php  }else{?>        $('subcat_id-wrapper').style.display = "none";        $('subsubcat_id-wrapper').style.display = "none";      <?php } ?>    }  });</script>